<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glow Log - Skincare Tracker</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/lucide-static@0.321.0/font/lucide.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .animate-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* Custom scrollbar for mobile */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // Simple Icon Component for CDN compatibility
        const Icon = ({ name, size = 20, className = "" }) => (
            <i className={`lucide-${name} ${className}`} style={{ fontSize: size }}></i>
        );

        const App = () => {
            const [currentMonth, setCurrentMonth] = useState(new Date());
            const [selectedDate, setSelectedDate] = useState(null);
            const [completedSteps, setCompletedSteps] = useState(() => {
                const saved = localStorage.getItem('glow_completed_steps');
                return saved ? JSON.parse(saved) : {};
            });
            const [view, setView] = useState('calendar');
            
            // Initial state changed to all false so nothing is open by default
            const [openSections, setOpenSections] = useState({
                morning: false,
                afternoon: false,
                night: false
            });

            // Persist to local storage
            useEffect(() => {
                localStorage.setItem('glow_completed_steps', JSON.stringify(completedSteps));
            }, [completedSteps]);

            const toggleHandbookSection = (section) => {
                setOpenSections(prev => ({ ...prev, [section]: !prev[section] }));
            };

            const nightRotation = {
                'Monday': { focus: 'Pigmentation', color: 'rose', description: 'Kojic Acid + Alpha Arbutin', details: 'Breaks pigment, lightens lip corners. No Retinol.' },
                'Tuesday': { focus: 'Retinol', color: 'indigo', description: 'Low-strength (0.2â€“0.3%)', details: 'Improves texture. Follow with moisturizer.' },
                'Wednesday': { focus: 'Hydration', color: 'cyan', description: 'Niacinamide + HA', details: 'Barrier healing, calm skin, glow foundation.' },
                'Thursday': { focus: 'Pigmentation', color: 'rose', description: 'Kojic Acid + Alpha Arbutin', details: 'Extra dot around mouth corners.' },
                'Friday': { focus: 'Retinol', color: 'indigo', description: 'Low-strength (0.2â€“0.3%)', details: 'Pea-size only. Future-proofs skin.' },
                'Saturday': { focus: 'Peptides', color: 'purple', description: 'Skin Polishing', details: 'Enhances elasticity for "expensive" skin.' },
                'Sunday': { focus: 'Barrier Repair', color: 'emerald', description: 'Ceramide / Mask', details: 'No actives. Let skin recover.' },
            };

            const routines = {
                Morning: {
                    goal: "instant brightness, hydration, protection, glow that lasts all day",
                    icon: "sun",
                    color: "amber",
                    steps: [
                        { id: 'm1', name: "Step 1 â€” CLEANSER (Hydrating, non-foaming)", points: ["Cream / lotion cleanser only", "Keeps natural oils intact", "Prevents dullness caused by dryness"], brain: "Dry skin must NEVER feel tight after washing." },
                        { id: 'm2', name: "Step 2 â€” HYDRATING TONER / ESSENCE", sub: "FOUNDATION OF RADIANCE", badge: "NON-NEGOTIABLE", points: ["Floods skin with water", "Makes skin look plump, fresh, brighter", "Helps serums absorb evenly"], checklist: ["Apply with hands, press gently", "Can use 1â€“2 layers if skin feels dry"] },
                        { id: 'm3', name: "Step 3 â€” VITAMIN C SERUM (BRIGHTNESS CORE)", points: ["Removes oxidative dullness", "Improves clarity", "Prevents further darkening"], checklist: ["2â€“3 drops only", "Use daily, morning only"] },
                        { id: 'm4', name: "Step 4 â€” NIACINAMIDE (3â€“5%)", points: ["Strengthens barrier", "Smooths texture", "Makes brightness stable (not temporary)", "Supports pigmentation control (PCOD-safe)"], checklist: ["Apply thin layer"] },
                        { id: 'm5', name: "Step 5 â€” HYALURONIC ACID SERUM (GLOW AMPLIFIER)", points: ["Deep hydration", "Plumps skin â†’ reflects more light", "Makes skin look instantly fresher"], brain: "Apply on slightly damp skin" },
                        { id: 'm6', name: "Step 6 â€” MOISTURIZER (CERAMIDE-RICH)", points: ["Locks all hydration layers", "Prevents dryness-related dullness", "Keeps skin smooth and elastic"], checklist: ["Must contain ceramides + fatty acids"] },
                        { id: 'm7', name: "Step 7 â€” SUNSCREEN SPF 50 PA++++", sub: "MOST IMPORTANT STEP", points: ["Prevents tanning & pigmentation", "Protects lip-corner area", "Preserves all brightness you build"], checklist: ["Apply generously", "Around mouth, jaw, under nose", "Daily â€” even indoors"] },
                    ]
                },
                Afternoon: {
                    goal: "Protection reapplication & hydration refresh",
                    icon: "cloud-sun",
                    color: "orange",
                    steps: [
                        { id: 'a1', name: "Step 1 â€” ðŸ” SUNSCREEN REAPPLICATION", points: ["Use stick / compact / gel"] },
                        { id: 'a2', name: "Step 2 â€” ðŸ’¦ HYDRATION REFRESH (Optional)", points: ["Hydrating mist OR Tiny tap of HA gel on cheeks"], checklist: ["Revives glow instantly", "No makeup needed"] },
                    ]
                },
                Night: {
                    goal: "repair, pigment correction, long-term radiance",
                    icon: "moon",
                    color: "indigo",
                    steps: [
                        { id: 'n1', name: "Step 1 â€” CLEANSER", points: ["Same gentle hydrating cleanser."] },
                        { id: 'n2', name: "Step 2 â€” HYDRATING TONER / ESSENCE", points: ["Yes, again.", "Dry skin needs water before treatment."] },
                        { id: 'n_active', isRotation: true, name: "Step 3 â€” NIGHT ACTIVE ROTATION" },
                        { id: 'n3', name: "Step 4 â€” NIGHT MOISTURIZER (RICH)", points: ["Thick, nourishing", "Prevents moisture loss", "Ensures bright morning skin"] },
                        { id: 'n4', name: "Step 5 â€” FACIAL OIL (OPTIONAL BUT IDEAL)", points: ["2â€“3 drops only", "Best: squalane / rosehip"], checklist: ["Seals hydration", "Prevents dry, dull wake-up skin"] },
                    ]
                }
            };

            const formatDateKey = (date) => {
                if (!date) return '';
                return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;
            };

            const toggleStep = (stepId) => {
                const dateKey = formatDateKey(selectedDate);
                setCompletedSteps(prev => ({
                    ...prev,
                    [dateKey]: { ...(prev[dateKey] || {}), [stepId]: !prev[dateKey]?.[stepId] }
                }));
            };

            const getProgress = (date) => {
                const key = formatDateKey(date);
                if (!completedSteps[key]) return 0;
                const totalSteps = routines.Morning.steps.length + routines.Afternoon.steps.length + routines.Night.steps.length;
                const completedCount = Object.values(completedSteps[key]).filter(Boolean).length;
                return Math.round((completedCount / totalSteps) * 100);
            };

            const calendarDays = useMemo(() => {
                const year = currentMonth.getFullYear();
                const month = currentMonth.getMonth();
                const days = [];
                const total = new Date(year, month + 1, 0).getDate();
                const start = new Date(year, month, 1).getDay();
                for (let i = 0; i < start; i++) days.push(null);
                for (let d = 1; d <= total; d++) days.push(new Date(year, month, d));
                return days;
            }, [currentMonth]);

            const selectedDayName = selectedDate ? new Intl.DateTimeFormat('en-US', { weekday: 'long' }).format(selectedDate) : '';

            return (
                <div className="min-h-screen bg-slate-50 pb-20 selection:bg-indigo-100">
                    {view === 'calendar' ? (
                        <div className="max-w-5xl mx-auto p-4 md:p-10 animate-in">
                            <header className="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
                                <div>
                                    <h1 className="text-3xl font-extrabold text-slate-900 flex items-center gap-3 tracking-tight">
                                        <Icon name="sparkles" className="text-indigo-600" size={28} /> GLOW LOG
                                    </h1>
                                    <p className="text-slate-500 font-medium">Your Daily Radiance Tracker</p>
                                </div>
                                <div className="flex items-center gap-2 bg-white p-2 rounded-2xl border border-slate-200 shadow-sm self-start">
                                    <button onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1))} className="p-2 hover:bg-slate-50 rounded-xl transition-colors"><Icon name="chevron-left" /></button>
                                    <span className="font-bold min-w-[120px] text-center uppercase tracking-widest text-xs">
                                        {currentMonth.toLocaleString('default', { month: 'long', year: 'numeric' })}
                                    </span>
                                    <button onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1))} className="p-2 hover:bg-slate-50 rounded-xl transition-colors"><Icon name="chevron-right" /></button>
                                </div>
                            </header>

                            <div className="bg-white rounded-[2.5rem] border border-slate-200 shadow-xl shadow-slate-200/50 overflow-hidden mb-16">
                                <div className="grid grid-cols-7 border-b border-slate-100 bg-slate-50/50">
                                    {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(d => (
                                        <div key={d} className="py-4 text-center text-[10px] font-black uppercase tracking-widest text-slate-400">{d}</div>
                                    ))}
                                </div>
                                <div className="grid grid-cols-7 p-2 md:p-6 gap-2 md:gap-4">
                                    {calendarDays.map((date, i) => {
                                        if (!date) return <div key={`empty-${i}`} className="aspect-square" />;
                                        const isToday = date.toDateString() === new Date().toDateString();
                                        const progress = getProgress(date);
                                        return (
                                            <button
                                                key={i}
                                                onClick={() => { setSelectedDate(date); setView('detail'); }}
                                                className={`relative aspect-square rounded-2xl md:rounded-3xl transition-all p-2 flex flex-col items-center justify-center gap-1 border ${
                                                    isToday ? 'ring-2 ring-indigo-500 ring-offset-2' : ''
                                                } ${progress > 0 ? 'border-indigo-100 bg-indigo-50/30' : 'border-slate-50 bg-slate-50/20'} hover:bg-indigo-50`}
                                            >
                                                <span className={`text-sm md:text-lg font-bold ${isToday ? 'text-indigo-600' : 'text-slate-700'}`}>{date.getDate()}</span>
                                                {progress > 0 && (
                                                    <div className="w-8 md:w-12 h-1 bg-slate-200 rounded-full mt-1 overflow-hidden">
                                                        <div className="h-full bg-indigo-500 transition-all" style={{ width: `${progress}%` }} />
                                                    </div>
                                                )}
                                                {progress === 100 && <Icon name="check-circle-2" className="text-emerald-500 absolute top-2 right-2" size={12} />}
                                            </button>
                                        );
                                    })}
                                </div>
                            </div>

                            {/* Handbook */}
                            <div className="space-y-8">
                                <div className="flex items-center gap-4">
                                    <Icon name="book-open" className="text-indigo-600" />
                                    <h2 className="text-2xl font-black text-slate-800 uppercase tracking-wider">THE GLOW HANDBOOK</h2>
                                    <div className="h-px flex-1 bg-slate-200"></div>
                                </div>

                                {/* Handbook Sections - All start closed now */}
                                <DropdownSection title="Morning Routine" color="amber" icon="sun" goal={routines.Morning.goal} isOpen={openSections.morning} toggle={() => toggleHandbookSection('morning')}>
                                    {routines.Morning.steps.map(step => <RoutineManualStep key={step.id} step={step} color="amber" />)}
                                </DropdownSection>

                                <DropdownSection title="Afternoon Routine" color="orange" icon="cloud-sun" goal={routines.Afternoon.goal} isOpen={openSections.afternoon} toggle={() => toggleHandbookSection('afternoon')}>
                                    {routines.Afternoon.steps.map(step => <RoutineManualStep key={step.id} step={step} color="orange" />)}
                                </DropdownSection>

                                <DropdownSection title="Night Routine" color="indigo" icon="moon" goal={routines.Night.goal} isOpen={openSections.night} toggle={() => toggleHandbookSection('night')}>
                                    <RoutineManualStep step={routines.Night.steps[0]} color="indigo" />
                                    <RoutineManualStep step={routines.Night.steps[1]} color="indigo" />
                                    <div className="bg-slate-50 rounded-[2.5rem] p-6 md:p-10 border border-slate-200 my-8">
                                        <div className="flex items-center gap-4 mb-8">
                                            <div className="p-3 bg-white rounded-2xl border border-slate-200 shadow-sm text-indigo-600"><Icon name="zap" size={24}/></div>
                                            <h3 className="text-xl font-bold text-slate-800 tracking-tight">ðŸ”„ NIGHT ACTIVE ROTATION</h3>
                                        </div>
                                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                            <RotationDetailCard focus="ðŸ”¹ Pigmentation Nights" days="Mon & Thu" ingredients="Kojic Acid + Alpha Arbutin" color="rose" points={["Breaks existing pigment", "Lightens lip corners", "Evens tone"]} checklist={["Thin layer", "Extra dot around mouth corners"]} warning="Do not combine with retinol" />
                                            <RotationDetailCard focus="ðŸ”¹ Retinol Nights" days="Tue & Fri" ingredients="Low-strength retinol (0.2â€“0.3%)" color="indigo" points={["Improves texture", "Speeds pigment fading", "Future-proofs skin"]} checklist={["Pea-size only", "Always followed by moisturizer"]} />
                                            <RotationDetailCard focus="ðŸ”¹ Hydration Night" days="Wed" ingredients="Niacinamide + Hyaluronic Acid" color="cyan" points={["Barrier healing", "Calm skin", "Glow foundation"]} />
                                            <RotationDetailCard focus="ðŸ”¹ Peptide Night" days="Sat" ingredients="Improves skin quality" color="purple" points={["Makes skin look polished & 'expensive'", "Enhances elasticity"]} />
                                            <RotationDetailCard focus="ðŸ”¹ Barrier Repair Night" days="Sun" ingredients="Ceramide cream / sleeping mask" color="emerald" points={["Panthenol, squalane, shea butter"]} checklist={["Let skin recover"]} warning="No actives" />
                                        </div>
                                    </div>
                                    <RoutineManualStep step={routines.Night.steps[3]} color="indigo" />
                                    <RoutineManualStep step={routines.Night.steps[4]} color="indigo" />
                                </DropdownSection>

                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-12">
                                    <div className="bg-indigo-900 rounded-[2.5rem] p-8 text-white relative overflow-hidden shadow-xl shadow-indigo-100">
                                        <div className="flex items-center gap-4 mb-6"><Icon name="beaker" size={24} className="text-indigo-300"/><h3 className="font-black uppercase tracking-widest text-indigo-100">ðŸ§ª Weekly Add-On</h3></div>
                                        <h4 className="text-xl font-bold italic mb-2">âœ¨ Gentle Chemical Exfoliation (1Ã— Week)</h4>
                                        <p className="text-sm text-indigo-200 mb-6 font-medium leading-relaxed">Mandelic OR Lactic acid (low %). Removes dull surface skin, instantly boosts brightness.</p>
                                        <div className="flex items-center gap-3 bg-rose-500/20 border border-rose-500/40 p-4 rounded-2xl text-rose-100 font-bold text-[10px] uppercase tracking-wider"><Icon name="alert-circle" size={16} /> Never same night as retinol or kojic acid</div>
                                    </div>
                                    <div className="bg-rose-50 rounded-[2.5rem] p-8 border border-rose-100 shadow-sm">
                                        <div className="flex items-center gap-4 mb-6"><Icon name="award" size={24} className="text-rose-500"/><h3 className="font-black uppercase tracking-widest text-rose-900">ðŸ‘„ Lip-Corner Care (Daily)</h3></div>
                                        <div className="space-y-4">
                                            <div className="flex items-center gap-4 bg-white p-4 rounded-2xl border border-rose-100"><Icon name="sun" className="text-amber-500" /><p className="text-sm font-bold text-rose-900">Morning: sunscreen around mouth</p></div>
                                            <div className="flex items-center gap-4 bg-white p-4 rounded-2xl border border-rose-100"><Icon name="moon" className="text-indigo-600" /><p className="text-sm font-bold text-rose-900">Night: tiny moisturizer / balm</p></div>
                                            <div className="pt-2 text-[10px] font-black uppercase text-rose-400 flex items-center gap-2"><Icon name="check-circle-2" size={14}/> Prevents deepening of pigmentation</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    ) : (
                        <div className="max-w-4xl mx-auto p-4 md:p-8 animate-in">
                            <button onClick={() => setView('calendar')} className="mb-6 flex items-center gap-2 text-slate-500 font-bold text-sm bg-white px-4 py-2 rounded-xl border border-slate-200 shadow-sm hover:text-indigo-600 transition-all"><Icon name="chevron-left" size={18} /> Back to Log</button>
                            <div className="bg-white rounded-[3rem] border border-slate-200 shadow-2xl overflow-hidden mb-10">
                                <div className="bg-slate-900 text-white p-8 md:p-12 relative overflow-hidden">
                                   <div className="absolute top-0 right-0 w-64 h-64 bg-indigo-500/20 blur-[100px] rounded-full -mr-20 -mt-20"></div>
                                   <div className="relative z-10">
                                      <p className="text-indigo-400 font-black uppercase tracking-widest text-xs mb-2">{selectedDayName}</p>
                                      <h2 className="text-4xl font-bold mb-4 tracking-tight">{selectedDate.toLocaleDateString('default', { day: 'numeric', month: 'long', year: 'numeric' })}</h2>
                                      <div className="flex items-center gap-3"><div className="h-2 w-32 bg-white/10 rounded-full overflow-hidden"><div className="h-full bg-indigo-400" style={{ width: `${getProgress(selectedDate)}%` }}></div></div><span className="text-xs font-bold text-indigo-300">{getProgress(selectedDate)}% Completed</span></div>
                                   </div>
                                </div>
                                <div className="p-4 md:p-10 space-y-12">
                                    {Object.entries(routines).map(([name, config]) => (
                                        <section key={name}>
                                            <div className="flex items-center gap-3 mb-6"><div className={`p-3 bg-${config.color}-50 text-${config.color}-600 rounded-2xl`}><Icon name={config.icon} size={24} /></div><h3 className="text-xl font-bold text-slate-800">{name} Routine</h3></div>
                                            <div className="space-y-3">
                                                {config.steps.map((step) => {
                                                    const isDone = completedSteps[formatDateKey(selectedDate)]?.[step.id];
                                                    
                                                    if (step.isRotation) {
                                                        const rot = nightRotation[selectedDayName];
                                                        return (
                                                            <div 
                                                                key="rotation" 
                                                                onClick={() => toggleStep(step.id)}
                                                                className={`p-6 rounded-[2rem] border-2 transition-all cursor-pointer flex items-start gap-4 ${
                                                                    isDone ? 'bg-emerald-50 border-emerald-200 shadow-inner' : `bg-${rot.color}-50/30 border-${rot.color}-100 hover:border-${rot.color}-300 hover:shadow-md`
                                                                }`}
                                                            >
                                                                <div className={`w-10 h-10 rounded-full flex items-center justify-center border-2 shrink-0 transition-all ${
                                                                    isDone ? 'bg-emerald-500 border-emerald-500 text-white shadow-lg' : 'border-slate-200 bg-white'
                                                                }`}>
                                                                    {isDone ? <Icon name="check-circle-2" size={24} /> : <Icon name="zap" className={`text-${rot.color}-600`} size={20} />}
                                                                </div>
                                                                <div className="flex-1">
                                                                    <div className="flex items-center gap-2 mb-1">
                                                                        <span className={`text-[10px] font-black uppercase px-2 py-0.5 rounded bg-${rot.color}-600 text-white`}>Active</span>
                                                                        <h4 className={`font-bold text-lg ${isDone ? 'text-slate-400 line-through' : `text-${rot.color}-900`}`}>
                                                                            {step.name}
                                                                        </h4>
                                                                    </div>
                                                                    <p className="text-sm font-bold text-slate-700">{rot.focus} Focus Night</p>
                                                                    <p className="text-xs text-slate-500 mt-1 italic">{rot.description} â€” {rot.details}</p>
                                                                </div>
                                                            </div>
                                                        );
                                                    }

                                                    return (
                                                        <div 
                                                            key={step.id} 
                                                            onClick={() => toggleStep(step.id)} 
                                                            className={`flex items-center gap-4 p-5 rounded-3xl border transition-all cursor-pointer ${
                                                                isDone ? 'bg-white border-emerald-100 shadow-sm opacity-60' : 'bg-white border-slate-100 hover:border-slate-300 shadow-sm'
                                                            }`}
                                                        >
                                                            <div className={`w-8 h-8 rounded-full flex items-center justify-center border-2 shrink-0 transition-all ${
                                                                isDone ? 'bg-emerald-500 border-emerald-500 text-white' : 'border-slate-200'
                                                            }`}>
                                                                {isDone ? <Icon name="check-circle-2" size={18} /> : null}
                                                            </div>
                                                            <div className="flex-1">
                                                                <h4 className={`font-bold text-sm ${isDone ? 'text-slate-400 line-through' : 'text-slate-800'}`}>
                                                                    {step.name}
                                                                </h4>
                                                                {step.sub && <p className="text-[11px] text-slate-400 font-bold uppercase mt-0.5">{step.sub}</p>}
                                                            </div>
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        </section>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* CSS Custom Helpers */}
                    <style dangerouslySetInnerHTML={{ __html: `
                        .bg-rose-500\\/20 { background-color: rgba(244, 63, 94, 0.2); } .text-indigo-400 { color: #818cf8; } .text-indigo-300 { color: #a5b4fc; }
                        .text-rose-900 { color: #881337; } .bg-rose-50 { background-color: #fff1f2; } .text-rose-600 { color: #e11d48; } .text-rose-700 { color: #be123c; }
                        .bg-cyan-50 { background-color: #ecfeff; } .text-cyan-600 { color: #0891b2; } .bg-purple-50 { background-color: #faf5ff; } .text-purple-600 { color: #9333ea; }
                        .bg-emerald-50 { background-color: #ecfdf5; } .text-emerald-600 { color: #059669; }
                        .border-rose-100 { border-color: #ffe4e6; } .border-cyan-100 { border-color: #cffafe; }
                        .text-indigo-900 { color: #1e1b4b; } .text-cyan-900 { color: #164e63; }
                        .bg-rose-600 { background-color: #e11d48; } .bg-amber-500 { background-color: #f59e0b; } .bg-orange-500 { background-color: #f97316; } .bg-indigo-600 { background-color: #4f46e5; }
                        .bg-amber-600 { background-color: #d97706; } .bg-orange-600 { background-color: #ea580c; } .bg-indigo-700 { background-color: #4338ca; }
                        .text-rose-400 { color: #fb7185; } .border-rose-300 { border-color: #fda4af; } .text-rose-800 { color: #9f1239; }
                    `}} />
                </div>
            );
        };

        const DropdownSection = ({ title, color, icon, goal, isOpen, toggle, children }) => (
            <div className="bg-white rounded-[2.5rem] border border-slate-200 shadow-sm overflow-hidden mb-4 transition-all">
                <button onClick={toggle} className={`w-full flex items-center justify-between bg-${color}-500 p-8 text-white hover:bg-${color}-600 transition-all`}>
                    <div className="flex items-center gap-4"><Icon name={icon} size={32} /><div className="text-left"><h3 className="text-2xl font-black uppercase tracking-tight leading-none mb-1">{title}</h3><p className="font-bold opacity-90 text-xs hidden sm:block uppercase tracking-wide">Goal: {goal}</p></div></div>
                    <Icon name="chevron-down" className={`transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`} size={28} />
                </button>
                {isOpen && <div className="p-6 md:p-10 space-y-12 animate-in">{children}</div>}
            </div>
        );

        const RoutineManualStep = ({ step, color }) => (
            <div className="flex flex-col md:flex-row items-start gap-6 group">
                <div className="w-12 h-12 rounded-3xl bg-slate-50 border border-slate-100 flex items-center justify-center font-black text-slate-300 shrink-0 group-hover:bg-slate-100 transition-colors">
                    {step.id.charAt(0) === 'n' && step.isRotation ? 'â˜…' : step.id.slice(1)}
                </div>
                <div className="flex-1 space-y-4">
                    <div className="flex flex-wrap items-center gap-3">
                        <h4 className="text-xl font-bold text-slate-800 uppercase tracking-tight leading-tight">{step.name}</h4>
                        {step.badge && <span className={`px-2 py-1 bg-${color}-50 text-${color}-700 text-[10px] font-black uppercase rounded-lg border border-${color}-100`}>{step.badge}</span>}
                    </div>
                    {step.sub && <p className="text-sm font-black text-slate-400 uppercase tracking-widest leading-none">{step.sub}</p>}
                    {step.points && (
                        <ul className="space-y-1.5">
                            {step.points.map((p, i) => <li key={i} className="text-sm text-slate-600 font-bold leading-relaxed">â€¢ {p}</li>)}
                        </ul>
                    )}
                    {step.checklist && (
                        <div className="flex flex-wrap gap-2 pt-1">
                            {step.checklist.map((c, i) => <span key={i} className={`text-[11px] font-black text-${color}-700 bg-${color}-50 px-3 py-2 rounded-xl border border-${color}-100 flex items-center gap-2`}><Icon name="check-circle-2" size={14} /> {c}</span>)}
                        </div>
                    )}
                    {step.brain && (
                        <div className="inline-flex items-start gap-4 bg-indigo-50 p-5 rounded-2xl border border-indigo-100 shadow-sm">
                            <span className="text-3xl">ðŸ§ </span>
                            <p className="text-xs font-bold text-indigo-700 leading-relaxed italic">{step.brain}</p>
                        </div>
                    )}
                </div>
            </div>
        );

        const RotationDetailCard = ({ focus, days, ingredients, color, points, checklist, warning }) => (
            <div className={`p-6 rounded-[2rem] border border-${color}-100 bg-white flex flex-col h-full shadow-sm hover:shadow-md transition-shadow`}>
                <div className="flex items-center justify-between mb-4">
                    <h5 className={`text-lg font-black text-${color}-900 uppercase tracking-tight`}>{focus}</h5>
                    <span className={`px-3 py-1 bg-${color}-50 text-${color}-600 rounded-full text-[10px] font-black`}>{days}</span>
                </div>
                <p className="text-sm font-black text-slate-800 mb-4 bg-slate-50 p-3 rounded-2xl border border-slate-100 italic">{ingredients}</p>
                <div className="space-y-3 flex-1">
                    {points && points.map((p, i) => <p key={i} className="text-xs font-bold text-slate-500 flex items-start gap-2 leading-relaxed">â€¢ {p}</p>)}
                    {checklist && (
                        <div className="space-y-2 pt-2">
                            {checklist.map((c, i) => <div key={i} className={`text-[10px] font-black text-${color}-700 flex items-center gap-2`}><Icon name="check-circle-2" size={14} /> {c}</div>)}
                        </div>
                    )}
                    {warning && (
                        <div className="pt-2 flex items-center gap-2 text-[10px] font-black text-rose-500 uppercase tracking-wide"><Icon name="alert-circle" size={16} /> {warning}</div>
                    )}
                </div>
            </div>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
